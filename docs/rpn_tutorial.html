<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>ç°ä»£ C++ æ‰‹æŠŠæ‰‹å®ç° RPN è®¡ç®—å™¨</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>ğŸ³</text></svg>">
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="nimib 0.3.12" name="generator">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.min.css">
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/pietroppeter/nimib/assets/atom-one-light.css'>
    <script src="https://cdn.jsdelivr.net/gh/pietroppeter/nimib@main/assets/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

  <style>
.nb-box {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.nb-small {
  font-size: 0.8rem;
}
button.nb-small {
  float: right;
  padding: 2px;
  padding-right: 5px;
  padding-left: 5px;
}
section#source {
  display:none
}
pre > code {
  font-size: 1.2em;
}
.nb-output {
  line-height: 1.15;
}
figure {
  margin: 2rem 0;
}
figcaption {
  text-align: center;
}
  
</style>
  
</head>
<body>
<header>
<div class="nb-box">
  <span><a href=".">ğŸ¡</a></span>
  <span><code>rpn_tutorial.nim</code></span>
  <span><a href="https://github.com/sonya-lzy/rpn_calc"><svg aria-hidden="true" width="1.2em" height="1.2em" style="vertical-align: middle;" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59c.4.07.55-.17.55-.38c0-.19-.01-.82-.01-1.49c-2.01.37-2.53-.49-2.69-.94c-.09-.23-.48-.94-.82-1.13c-.28-.15-.68-.52-.01-.53c.63-.01 1.08.58 1.23.82c.72 1.21 1.87.87 2.33.66c.07-.52.28-.87.51-1.07c-1.78-.2-3.64-.89-3.64-3.95c0-.87.31-1.59.82-2.15c-.08-.2-.36-1.02.08-2.12c0 0 .67-.21 2.2.82c.64-.18 1.32-.27 2-.27c.68 0 1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82c.44 1.1.16 1.92.08 2.12c.51.56.82 1.27.82 2.15c0 3.07-1.87 3.75-3.65 3.95c.29.25.54.73.54 1.48c0 1.07-.01 1.93-.01 2.2c0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z" fill="#000"></path></svg></a></span>
</div>
<hr>
</header><main>
<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
    line-height: 1.6;
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    color: #333;
}
h1, h2, h3 {
    color: #2c3e50;
    margin-top: 1.5em;
    margin-bottom: 0.5em;
}
pre {
    background: #f8f9fa;
    border: 1px solid #e1e4e8;
    border-radius: 4px;
    padding: 16px;
    overflow-x: auto;
}
code {
    font-family: 'SF Mono', Monaco, 'Cascadia Code', Consolas, monospace;
    background: #f8f9fa;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.9em;
}
.meta {
    display: flex;
    gap: 20px;
    margin: 20px 0;
    color: #666;
    font-size: 0.9em;
}
.toc {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin: 30px 0;
}
.chapter {
    border-bottom: 1px solid #eee;
    padding-bottom: 30px;
    margin-bottom: 30px;
}
.chapter:last-child {
    border-bottom: none;
}
.filename {
    background: #2c3e50;
    color: white;
    padding: 10px 15px;
    border-radius: 4px 4px 0 0;
    font-family: 'SF Mono', monospace;
    font-size: 0.9em;
}
.console {
    background: #1a1a1a;
    color: #00ff9d;
    padding: 15px;
    border-radius: 4px;
    font-family: 'SF Mono', monospace;
    margin: 15px 0;
}
.console::before {
    content: "$ ";
}
.note {
    background: #e8f4fd;
    border-left: 4px solid #3498db;
    padding: 15px;
    margin: 20px 0;
    border-radius: 0 4px 4px 0;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
}
th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: left;
}
th {
    background: #f2f2f2;
}
.badge {
    display: inline-block;
    background: #3498db;
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8em;
    margin-right: 8px;
    margin-bottom: 8px;
}
</style>
<h1>ç°ä»£ C++ æ‰‹æŠŠæ‰‹å®ç° RPN è®¡ç®—å™¨</h1>
<p><strong>ä»é›¶å¼€å§‹å®ç°ä¸€ä¸ªå®Œæ•´çš„é€†æ³¢å…°è¡¨ç¤ºæ³•è®¡ç®—å™¨</strong></p>
<div class="meta">
    <div><strong>ç‰ˆæœ¬:</strong> 1.0</div>
    <div><strong>ç¼–è¯‘å™¨:</strong> GCC 10+/Clang 12+/MSVC 2019+</div>
    <div><strong>æ ‡å‡†:</strong> C++17</div>
</div>
<div>
    <span class="badge">RPN</span>
    <span class="badge">C++17</span>
    <span class="badge">STL</span>
    <span class="badge">ç®—æ³•</span>
    <span class="badge">å‘½ä»¤è¡Œ</span>
    <span class="badge">å¼€æº</span>
</div>
<div class="toc">
    <h2>ç›®å½•</h2>
    <ol>
        <li><a href="#chapter1">ç¬¬ 1 ç« : Hello RPN</a></li>
        <li><a href="#chapter2">ç¬¬ 2 ç« : å¤´æ–‡ä»¶åŒ– + å•å…ƒæµ‹è¯•</a></li>
        <li><a href="#chapter3">ç¬¬ 3 ç« : äº¤äº’å¼ REPL</a></li>
        <li><a href="#chapter4">ç¬¬ 4 ç« : å•æ–‡ä»¶å‘å¸ƒ & äº¤å‰ç¼–è¯‘</a></li>
        <li><a href="#chapter5">ç¬¬ 5 ç« : æ‰©å±•åŠŸèƒ½ä¸æŒ‘æˆ˜</a></li>
    </ol>
</div>
<div class="chapter" id="chapter1">
    <h2>ç¬¬ 1 ç« : Hello RPN</h2>
    
    <p>æˆ‘ä»¬å…ˆä»ä¸€ä¸ªæœ€å°å¯è¿è¡Œçš„ RPN è®¡ç®—å™¨å¼€å§‹ï¼Œç†è§£é€†æ³¢å…°è¡¨ç¤ºæ³•çš„æ ¸å¿ƒæ€æƒ³ã€‚</p>
    
    <div class="note">
        <p><strong>RPN ç®€ä»‹</strong></p>
        <p>é€†æ³¢å…°è¡¨ç¤ºæ³•ï¼ˆReverse Polish Notationï¼‰æ˜¯ä¸€ç§ä¸éœ€è¦æ‹¬å·çš„æ•°å­¦è¡¨è¾¾å¼è¡¨ç¤ºæ³•ï¼Œæ‰€æœ‰è¿ç®—ç¬¦éƒ½è·Ÿåœ¨æ“ä½œæ•°åé¢ã€‚</p>
        <p>ç¤ºä¾‹ï¼š<code>3 4 +</code> è¡¨ç¤º <code>3 + 4</code>ï¼Œ<code>3 4 + 5 *</code> è¡¨ç¤º <code>(3 + 4) * 5</code></p>
    </div>
</div>
<div class="filename">rpn_min.cpp</div>
<pre><code class="nohighlight hljs nim"><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&quot;&quot;#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include &lt;stack&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

double rpn_evaluate(const std::string&amp; expression) {
    std::stack&lt;double&gt; stack;
    std::istringstream iss(expression);
    std::string token;
    
    while (iss &gt;&gt; token) {
        if (token.size() == 1 &amp;&amp; std::string(&quot;+-*/&quot;).find(token[0]) != std::string::npos) {
            if (stack.size() &lt; 2) {
                throw std::runtime_error(&quot;Error: insufficient operands&quot;);
            }
            
            double b = stack.top(); stack.pop();
            double a = stack.top(); stack.pop();
            
            switch (token[0]) {
                case '+': stack.push(a + b); break;
                case '-': stack.push(a - b); break;
                case '*': stack.push(a * b); break;
                case '/': 
                    if (b == 0) throw std::runtime_error(&quot;Error: division by zero&quot;);
                    stack.push(a / b); 
                    break;
            }
        } else {
            try {
                stack.push(std::stod(token));
            } catch (const std::invalid_argument&amp;) {
                throw std::runtime_error(&quot;Error: invalid token '&quot; + token + &quot;'&quot;);
            }
        }
    }
    
    if (stack.size() != 1) {
        throw std::runtime_error(&quot;Error: expression invalid&quot;);
    }
    
    return stack.top();
}

int main() {
    std::string expression;
    std::cout &lt;&lt; &quot;Enter RPN expression: &quot;;
    std::getline(std::cin, expression);
    
    try {
        double result = rpn_evaluate(expression);
        std::cout &lt;&lt; &quot;Result: &quot; &lt;&lt; result &lt;&lt; std::endl;
    } catch (const std::exception&amp; e) {
        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;
        return 1;
    }
    
    return 0;
}&quot;&quot;&quot;</span></code></pre><pre class="nb-output">#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include &lt;stack&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

double rpn_evaluate(const std::string&amp; expression) {
    std::stack&lt;double&gt; stack;
    std::istringstream iss(expression);
    std::string token;
    
    while (iss &gt;&gt; token) {
        if (token.size() == 1 &amp;&amp; std::string(&quot;+-*/&quot;).find(token[0]) != std::string::npos) {
            if (stack.size() &lt; 2) {
                throw std::runtime_error(&quot;Error: insufficient operands&quot;);
            }
            
            double b = stack.top(); stack.pop();
            double a = stack.top(); stack.pop();
            
            switch (token[0]) {
                case '+': stack.push(a + b); break;
                case '-': stack.push(a - b); break;
                case '*': stack.push(a * b); break;
                case '/': 
                    if (b == 0) throw std::runtime_error(&quot;Error: division by zero&quot;);
                    stack.push(a / b); 
                    break;
            }
        } else {
            try {
                stack.push(std::stod(token));
            } catch (const std::invalid_argument&amp;) {
                throw std::runtime_error(&quot;Error: invalid token '&quot; + token + &quot;'&quot;);
            }
        }
    }
    
    if (stack.size() != 1) {
        throw std::runtime_error(&quot;Error: expression invalid&quot;);
    }
    
    return stack.top();
}

int main() {
    std::string expression;
    std::cout &lt;&lt; &quot;Enter RPN expression: &quot;;
    std::getline(std::cin, expression);
    
    try {
        double result = rpn_evaluate(expression);
        std::cout &lt;&lt; &quot;Result: &quot; &lt;&lt; result &lt;&lt; std::endl;
    } catch (const std::exception&amp; e) {
        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;
        return 1;
    }
    
    return 0;
}</pre>
<div class="console">g++ -std=c++17 -o rpn_min rpn_min.cpp && ./rpn_min</div>
<div class="note">
    <p><strong>æœ¬ç« è¦ç‚¹</strong></p>
    <ul>
        <li>ç†è§£ RPN çš„åŸºæœ¬åŸç†</li>
        <li>ä½¿ç”¨ <code>std::stack</code> å®ç°è®¡ç®—</li>
        <li>åŸºæœ¬çš„é”™è¯¯å¤„ç†æœºåˆ¶</li>
    </ul>
</div>
<div class="chapter" id="chapter2">
    <h2>ç¬¬ 2 ç« : å¤´æ–‡ä»¶åŒ– + å•å…ƒæµ‹è¯•</h2>
    
    <p>å°†æ ¸å¿ƒé€»è¾‘å°è£…æˆå¤´æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å•å…ƒæµ‹è¯•ç¡®ä¿æ­£ç¡®æ€§ã€‚</p>
</div>
<div class="filename">rpn_engine.hpp</div>
<pre><code class="nohighlight hljs nim"><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&quot;&quot;#pragma once

#include &lt;stack&gt;
#include &lt;sstream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

class RPNEngine {
public:
    static double evaluate(const std::string&amp; expression) {
        std::stack&lt;double&gt; stack;
        std::istringstream iss(expression);
        std::string token;
        
        while (iss &gt;&gt; token) {
            if (is_operator(token)) {
                if (stack.size() &lt; 2) {
                    throw std::runtime_error(&quot;Insufficient operands&quot;);
                }
                
                double b = stack.top(); stack.pop();
                double a = stack.top(); stack.pop();
                apply_operator(stack, token, a, b);
            } 
            else if (is_function(token)) {
                if (stack.empty()) {
                    throw std::runtime_error(&quot;No operand for function&quot;);
                }
                
                double a = stack.top(); stack.pop();
                apply_function(stack, token, a);
            }
            else {
                try {
                    stack.push(std::stod(token));
                } catch (const std::invalid_argument&amp;) {
                    throw std::runtime_error(&quot;Invalid token: &quot; + token);
                }
            }
        }
        
        if (stack.size() != 1) {
            throw std::runtime_error(&quot;Invalid expression&quot;);
        }
        
        return stack.top();
    }

private:
    static bool is_operator(const std::string&amp; token) {
        if (token.size() != 1) return false;
        char op = token[0];
        return op == '+' || op == '-' || op == '*' || op == '/' || op == '^';
    }
    
    static bool is_function(const std::string&amp; token) {
        return token == &quot;sqrt&quot; || token == &quot;sin&quot; || token == &quot;cos&quot; || token == &quot;log&quot;;
    }
    
    static void apply_operator(std::stack&lt;double&gt;&amp; stack, const std::string&amp; op, 
                              double a, double b) {
        switch (op[0]) {
            case '+': stack.push(a + b); break;
            case '-': stack.push(a - b); break;
            case '*': stack.push(a * b); break;
            case '/': 
                if (b == 0) throw std::runtime_error(&quot;Division by zero&quot;);
                stack.push(a / b); 
                break;
            case '^': stack.push(std::pow(a, b)); break;
        }
    }
    
    static void apply_function(std::stack&lt;double&gt;&amp; stack, const std::string&amp; func, 
                              double a) {
        if (func == &quot;sqrt&quot;) {
            if (a &lt; 0) throw std::runtime_error(&quot;Square root of negative number&quot;);
            stack.push(std::sqrt(a));
        } else if (func == &quot;sin&quot;) {
            stack.push(std::sin(a));
        } else if (func == &quot;cos&quot;) {
            stack.push(std::cos(a));
        } else if (func == &quot;log&quot;) {
            if (a &lt;= 0) throw std::runtime_error(&quot;Logarithm of non-positive number&quot;);
            stack.push(std::log(a));
        }
    }
};&quot;&quot;&quot;</span></code></pre><pre class="nb-output">#pragma once

#include &lt;stack&gt;
#include &lt;sstream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

class RPNEngine {
public:
    static double evaluate(const std::string&amp; expression) {
        std::stack&lt;double&gt; stack;
        std::istringstream iss(expression);
        std::string token;
        
        while (iss &gt;&gt; token) {
            if (is_operator(token)) {
                if (stack.size() &lt; 2) {
                    throw std::runtime_error(&quot;Insufficient operands&quot;);
                }
                
                double b = stack.top(); stack.pop();
                double a = stack.top(); stack.pop();
                apply_operator(stack, token, a, b);
            } 
            else if (is_function(token)) {
                if (stack.empty()) {
                    throw std::runtime_error(&quot;No operand for function&quot;);
                }
                
                double a = stack.top(); stack.pop();
                apply_function(stack, token, a);
            }
            else {
                try {
                    stack.push(std::stod(token));
                } catch (const std::invalid_argument&amp;) {
                    throw std::runtime_error(&quot;Invalid token: &quot; + token);
                }
            }
        }
        
        if (stack.size() != 1) {
            throw std::runtime_error(&quot;Invalid expression&quot;);
        }
        
        return stack.top();
    }

private:
    static bool is_operator(const std::string&amp; token) {
        if (token.size() != 1) return false;
        char op = token[0];
        return op == '+' || op == '-' || op == '*' || op == '/' || op == '^';
    }
    
    static bool is_function(const std::string&amp; token) {
        return token == &quot;sqrt&quot; || token == &quot;sin&quot; || token == &quot;cos&quot; || token == &quot;log&quot;;
    }
    
    static void apply_operator(std::stack&lt;double&gt;&amp; stack, const std::string&amp; op, 
                              double a, double b) {
        switch (op[0]) {
            case '+': stack.push(a + b); break;
            case '-': stack.push(a - b); break;
            case '*': stack.push(a * b); break;
            case '/': 
                if (b == 0) throw std::runtime_error(&quot;Division by zero&quot;);
                stack.push(a / b); 
                break;
            case '^': stack.push(std::pow(a, b)); break;
        }
    }
    
    static void apply_function(std::stack&lt;double&gt;&amp; stack, const std::string&amp; func, 
                              double a) {
        if (func == &quot;sqrt&quot;) {
            if (a &lt; 0) throw std::runtime_error(&quot;Square root of negative number&quot;);
            stack.push(std::sqrt(a));
        } else if (func == &quot;sin&quot;) {
            stack.push(std::sin(a));
        } else if (func == &quot;cos&quot;) {
            stack.push(std::cos(a));
        } else if (func == &quot;log&quot;) {
            if (a &lt;= 0) throw std::runtime_error(&quot;Logarithm of non-positive number&quot;);
            stack.push(std::log(a));
        }
    }
};</pre>
<div class="chapter" id="chapter3">
    <h2>ç¬¬ 3 ç« : äº¤äº’å¼ REPL</h2>
    
    <p>å®ç°ä¸€ä¸ªå®Œæ•´çš„äº¤äº’å¼è®¡ç®—å™¨ï¼Œæ”¯æŒå†å²è®°å½•å’Œå‘½ä»¤è¡¥å…¨ã€‚</p>
</div>
<div class="filename">repl.cpp</div>
<pre><code class="nohighlight hljs nim"><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&quot;&quot;#include &quot;rpn_engine.hpp&quot;
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;vector&gt;
#include &lt;string&gt;

class REPL {
private:
    std::vector&lt;std::string&gt; history;
    
    void print_help() {
        std::cout &lt;&lt; &quot;\n=== RPN Calculator Commands ===\n&quot;;
        std::cout &lt;&lt; &quot;  &lt;expression&gt;    Evaluate RPN expression\n&quot;;
        std::cout &lt;&lt; &quot;  help            Show this help message\n&quot;;
        std::cout &lt;&lt; &quot;  history         Show calculation history\n&quot;;
        std::cout &lt;&lt; &quot;  clear           Clear the screen\n&quot;;
        std::cout &lt;&lt; &quot;  quit / exit     Exit the program\n&quot;;
        std::cout &lt;&lt; &quot;\nOperators: + - * / ^\n&quot;;
        std::cout &lt;&lt; &quot;Functions: sqrt sin cos log\n&quot;;
        std::cout &lt;&lt; &quot;Example: '5 5 + 3 *' =&gt; 30\n&quot;;
        std::cout &lt;&lt; &quot;==============================\n&quot;;
    }
    
    void print_history() {
        if (history.empty()) {
            std::cout &lt;&lt; &quot;No history yet.\n&quot;;
            return;
        }
        
        std::cout &lt;&lt; &quot;\n=== Calculation History ===\n&quot;;
        for (size_t i = 0; i &lt; history.size(); ++i) {
            std::cout &lt;&lt; i + 1 &lt;&lt; &quot;. &quot; &lt;&lt; history[i] &lt;&lt; &quot;\n&quot;;
        }
        std::cout &lt;&lt; &quot;===========================\n&quot;;
    }

public:
    void run() {
        std::cout &lt;&lt; &quot;RPN Calculator REPL (Type 'help' for commands)\n&quot;;
        std::cout &lt;&lt; &quot;==============================================\n\n&quot;;
        
        std::string line;
        while (true) {
            std::cout &lt;&lt; &quot;rpn&gt; &quot;;
            if (!std::getline(std::cin, line)) break;
            
            line.erase(0, line.find_first_not_of(&quot; \t\n\r&quot;));
            line.erase(line.find_last_not_of(&quot; \t\n\r&quot;) + 1);
            
            if (line.empty()) continue;
            
            if (line == &quot;quit&quot; || line == &quot;exit&quot;) {
                std::cout &lt;&lt; &quot;Goodbye!\n&quot;;
                break;
            } else if (line == &quot;help&quot;) {
                print_help();
                continue;
            } else if (line == &quot;history&quot;) {
                print_history();
                continue;
            } else if (line == &quot;clear&quot;) {
                for (int i = 0; i &lt; 50; ++i) std::cout &lt;&lt; &quot;\n&quot;;
                continue;
            }
            
            try {
                double result = RPNEngine::evaluate(line);
                std::cout &lt;&lt; &quot;= &quot; &lt;&lt; std::setprecision(12) &lt;&lt; result &lt;&lt; &quot;\n&quot;;
                history.push_back(line + &quot; =&gt; &quot; + std::to_string(result));
            } catch (const std::exception&amp; e) {
                std::cout &lt;&lt; &quot;Error: &quot; &lt;&lt; e.what() &lt;&lt; &quot;\n&quot;;
            }
        }
    }
};

int main() {
    REPL repl;
    repl.run();
    return 0;
}&quot;&quot;&quot;</span></code></pre><pre class="nb-output">#include &quot;rpn_engine.hpp&quot;
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;vector&gt;
#include &lt;string&gt;

class REPL {
private:
    std::vector&lt;std::string&gt; history;
    
    void print_help() {
        std::cout &lt;&lt; &quot;\n=== RPN Calculator Commands ===\n&quot;;
        std::cout &lt;&lt; &quot;  &lt;expression&gt;    Evaluate RPN expression\n&quot;;
        std::cout &lt;&lt; &quot;  help            Show this help message\n&quot;;
        std::cout &lt;&lt; &quot;  history         Show calculation history\n&quot;;
        std::cout &lt;&lt; &quot;  clear           Clear the screen\n&quot;;
        std::cout &lt;&lt; &quot;  quit / exit     Exit the program\n&quot;;
        std::cout &lt;&lt; &quot;\nOperators: + - * / ^\n&quot;;
        std::cout &lt;&lt; &quot;Functions: sqrt sin cos log\n&quot;;
        std::cout &lt;&lt; &quot;Example: '5 5 + 3 *' =&gt; 30\n&quot;;
        std::cout &lt;&lt; &quot;==============================\n&quot;;
    }
    
    void print_history() {
        if (history.empty()) {
            std::cout &lt;&lt; &quot;No history yet.\n&quot;;
            return;
        }
        
        std::cout &lt;&lt; &quot;\n=== Calculation History ===\n&quot;;
        for (size_t i = 0; i &lt; history.size(); ++i) {
            std::cout &lt;&lt; i + 1 &lt;&lt; &quot;. &quot; &lt;&lt; history[i] &lt;&lt; &quot;\n&quot;;
        }
        std::cout &lt;&lt; &quot;===========================\n&quot;;
    }

public:
    void run() {
        std::cout &lt;&lt; &quot;RPN Calculator REPL (Type 'help' for commands)\n&quot;;
        std::cout &lt;&lt; &quot;==============================================\n\n&quot;;
        
        std::string line;
        while (true) {
            std::cout &lt;&lt; &quot;rpn&gt; &quot;;
            if (!std::getline(std::cin, line)) break;
            
            line.erase(0, line.find_first_not_of(&quot; \t\n\r&quot;));
            line.erase(line.find_last_not_of(&quot; \t\n\r&quot;) + 1);
            
            if (line.empty()) continue;
            
            if (line == &quot;quit&quot; || line == &quot;exit&quot;) {
                std::cout &lt;&lt; &quot;Goodbye!\n&quot;;
                break;
            } else if (line == &quot;help&quot;) {
                print_help();
                continue;
            } else if (line == &quot;history&quot;) {
                print_history();
                continue;
            } else if (line == &quot;clear&quot;) {
                for (int i = 0; i &lt; 50; ++i) std::cout &lt;&lt; &quot;\n&quot;;
                continue;
            }
            
            try {
                double result = RPNEngine::evaluate(line);
                std::cout &lt;&lt; &quot;= &quot; &lt;&lt; std::setprecision(12) &lt;&lt; result &lt;&lt; &quot;\n&quot;;
                history.push_back(line + &quot; =&gt; &quot; + std::to_string(result));
            } catch (const std::exception&amp; e) {
                std::cout &lt;&lt; &quot;Error: &quot; &lt;&lt; e.what() &lt;&lt; &quot;\n&quot;;
            }
        }
    }
};

int main() {
    REPL repl;
    repl.run();
    return 0;
}</pre>
<div class="chapter" id="chapter4">
    <h2>ç¬¬ 4 ç« : å•æ–‡ä»¶å‘å¸ƒ & äº¤å‰ç¼–è¯‘</h2>
    
    <p>å°†æ•´ä¸ªé¡¹ç›®æ‰“åŒ…æˆå•ä¸ªæ–‡ä»¶ï¼Œå¹¶æ”¯æŒè·¨å¹³å°ç¼–è¯‘ã€‚</p>
<table>
    <tr>
        <th>å¹³å°</th>
        <th>ç¼–è¯‘å‘½ä»¤</th>
        <th>æ–‡ä»¶å¤§å°</th>
    </tr>
    <tr>
        <td>Linux/macOS</td>
        <td><code>g++ -std=c++17 -O3 -o rpn rpn_single.cpp</code></td>
        <td>~92 KB</td>
    </tr>
    <tr>
        <td>Windows (MinGW)</td>
        <td><code>x86_64-w64-mingw32-g++ -std=c++17 -O3 -o rpn.exe rpn_single.cpp</code></td>
        <td>~85 KB</td>
    </tr>
</table>
<div class="console"># ä¸‹è½½å®Œæ•´é¡¹ç›®
git clone https://github.com/sonya-lzy/rpn_calc.git
cd rpn_calc
<h1>ç¼–è¯‘å¹¶è¿è¡Œ</h1>
<p>g++ -std=c++17 -o rpn src/rpn_calc.cpp
./rpn</div></p>
<div class="chapter" id="chapter5">
    <h2>ç¬¬ 5 ç« : æ‰©å±•åŠŸèƒ½ä¸æŒ‘æˆ˜</h2>
    
    <div class="note">
        <p><strong>æ‰©å±•æŒ‘æˆ˜</strong></p>
        <ol>
            <li><strong>å¤æ•°æ”¯æŒ</strong>ï¼šæ‰©å±•æ”¯æŒå¤æ•°è¿ç®—</li>
            <li><strong>å˜é‡å­˜å‚¨</strong>ï¼šå®ç°å˜é‡èµ‹å€¼å’Œä½¿ç”¨</li>
            <li><strong>è„šæœ¬æ¨¡å¼</strong>ï¼šæ”¯æŒä»æ–‡ä»¶è¯»å–è¡¨è¾¾å¼</li>
            <li><strong>å›¾å½¢ç•Œé¢</strong>ï¼šä½¿ç”¨ Qt æˆ– ImGUI æ·»åŠ  GUI</li>
            <li><strong>ç½‘ç»œè®¡ç®—</strong>ï¼šå®ç°å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼</li>
        </ol>
    </div>
    
    <p>
        <strong>GitHub ä»“åº“:</strong> <a href="https://github.com/sonya-lzy/rpn_calc">https://github.com/sonya-lzy/rpn_calc</a><br>
        <strong>åœ¨çº¿æ–‡æ¡£:</strong> <a href="https://sonya-lzy.github.io/rpn_calc/rpn_manual.html">https://sonya-lzy.github.io/rpn_calc/rpn_manual.html</a>
    </p>
</div>
<hr>
<p style="text-align: center; color: #666; font-size: 0.9em;">
    Â© 2024 RPN Calculator Project | C++ ç¼–ç¨‹ä½œä¸š<br>
    ç”Ÿæˆæ—¶é—´: 2025-12-05 11:05:37
</p>
</main>
<footer>
<div class="nb-box">
  <span><span class="nb-small">made with <a href="https://pietroppeter.github.io/nimib/">nimib ğŸ³</a></span></span>
  <span></span>
  <span><button class="nb-small" id="show" onclick="toggleSourceDisplay()">Show Source</button></span>
</div>
</footer>
<section id="source">
<pre><code class="nohighlight nim hljs"><span class="hljs-keyword">import</span> nimib
<span class="hljs-keyword">import</span> std/[strutils, os, strformat]
<span class="hljs-keyword">import</span> times  <span class="hljs-comment"># æ·»åŠ è¿™ä¸€è¡Œ</span>

<span class="hljs-comment"># åˆå§‹åŒ–Nimib</span>
nbInit

<span class="hljs-comment"># è®¾ç½®æ–‡æ¡£å…ƒæ•°æ®</span>
nbDoc.context[<span class="hljs-string">&quot;title&quot;</span>] = <span class="hljs-string">&quot;ç°ä»£ C++ æ‰‹æŠŠæ‰‹å®ç° RPN è®¡ç®—å™¨&quot;</span>
nbDoc.context[<span class="hljs-string">&quot;author&quot;</span>] = <span class="hljs-string">&quot;Your Name&quot;</span>
nbDoc.context[<span class="hljs-string">&quot;description&quot;</span>] = <span class="hljs-string">&quot;ä»é›¶å¼€å§‹å®ç°ä¸€ä¸ªå®Œæ•´çš„é€†æ³¢å…°è¡¨ç¤ºæ³•è®¡ç®—å™¨&quot;</span>

<span class="hljs-comment"># æ·»åŠ è‡ªå®šä¹‰CSSæ ·å¼</span>
nbRawHtml: <span class="hljs-string">&quot;&quot;&quot;
&lt;style&gt;
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
    line-height: 1.6;
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    color: #333;
}
h1, h2, h3 {
    color: #2c3e50;
    margin-top: 1.5em;
    margin-bottom: 0.5em;
}
pre {
    background: #f8f9fa;
    border: 1px solid #e1e4e8;
    border-radius: 4px;
    padding: 16px;
    overflow-x: auto;
}
code {
    font-family: 'SF Mono', Monaco, 'Cascadia Code', Consolas, monospace;
    background: #f8f9fa;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.9em;
}
.meta {
    display: flex;
    gap: 20px;
    margin: 20px 0;
    color: #666;
    font-size: 0.9em;
}
.toc {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin: 30px 0;
}
.chapter {
    border-bottom: 1px solid #eee;
    padding-bottom: 30px;
    margin-bottom: 30px;
}
.chapter:last-child {
    border-bottom: none;
}
.filename {
    background: #2c3e50;
    color: white;
    padding: 10px 15px;
    border-radius: 4px 4px 0 0;
    font-family: 'SF Mono', monospace;
    font-size: 0.9em;
}
.console {
    background: #1a1a1a;
    color: #00ff9d;
    padding: 15px;
    border-radius: 4px;
    font-family: 'SF Mono', monospace;
    margin: 15px 0;
}
.console::before {
    content: &quot;$ &quot;;
}
.note {
    background: #e8f4fd;
    border-left: 4px solid #3498db;
    padding: 15px;
    margin: 20px 0;
    border-radius: 0 4px 4px 0;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
}
th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: left;
}
th {
    background: #f2f2f2;
}
.badge {
    display: inline-block;
    background: #3498db;
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8em;
    margin-right: 8px;
    margin-bottom: 8px;
}
&lt;/style&gt;
&quot;&quot;&quot;</span>

<span class="hljs-comment"># æ–‡æ¡£æ ‡é¢˜å’Œå…ƒæ•°æ®</span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
# ç°ä»£ C++ æ‰‹æŠŠæ‰‹å®ç° RPN è®¡ç®—å™¨

**ä»é›¶å¼€å§‹å®ç°ä¸€ä¸ªå®Œæ•´çš„é€†æ³¢å…°è¡¨ç¤ºæ³•è®¡ç®—å™¨**

&lt;div class=&quot;meta&quot;&gt;
    &lt;div&gt;&lt;strong&gt;ç‰ˆæœ¬:&lt;/strong&gt; 1.0&lt;/div&gt;
    &lt;div&gt;&lt;strong&gt;ç¼–è¯‘å™¨:&lt;/strong&gt; GCC 10+/Clang 12+/MSVC 2019+&lt;/div&gt;
    &lt;div&gt;&lt;strong&gt;æ ‡å‡†:&lt;/strong&gt; C++17&lt;/div&gt;
&lt;/div&gt;

&lt;div&gt;
    &lt;span class=&quot;badge&quot;&gt;RPN&lt;/span&gt;
    &lt;span class=&quot;badge&quot;&gt;C++17&lt;/span&gt;
    &lt;span class=&quot;badge&quot;&gt;STL&lt;/span&gt;
    &lt;span class=&quot;badge&quot;&gt;ç®—æ³•&lt;/span&gt;
    &lt;span class=&quot;badge&quot;&gt;å‘½ä»¤è¡Œ&lt;/span&gt;
    &lt;span class=&quot;badge&quot;&gt;å¼€æº&lt;/span&gt;
&lt;/div&gt;
&quot;&quot;&quot;</span>

<span class="hljs-comment"># ç›®å½•</span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
&lt;div class=&quot;toc&quot;&gt;
    &lt;h2&gt;ç›®å½•&lt;/h2&gt;
    &lt;ol&gt;
        &lt;li&gt;&lt;a href=&quot;#chapter1&quot;&gt;ç¬¬ 1 ç« : Hello RPN&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;#chapter2&quot;&gt;ç¬¬ 2 ç« : å¤´æ–‡ä»¶åŒ– + å•å…ƒæµ‹è¯•&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;#chapter3&quot;&gt;ç¬¬ 3 ç« : äº¤äº’å¼ REPL&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;#chapter4&quot;&gt;ç¬¬ 4 ç« : å•æ–‡ä»¶å‘å¸ƒ &amp; äº¤å‰ç¼–è¯‘&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;#chapter5&quot;&gt;ç¬¬ 5 ç« : æ‰©å±•åŠŸèƒ½ä¸æŒ‘æˆ˜&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
&lt;/div&gt;
&quot;&quot;&quot;</span>

<span class="hljs-comment"># ç¬¬1ç« </span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
&lt;div class=&quot;chapter&quot; id=&quot;chapter1&quot;&gt;
    &lt;h2&gt;ç¬¬ 1 ç« : Hello RPN&lt;/h2&gt;
    
    &lt;p&gt;æˆ‘ä»¬å…ˆä»ä¸€ä¸ªæœ€å°å¯è¿è¡Œçš„ RPN è®¡ç®—å™¨å¼€å§‹ï¼Œç†è§£é€†æ³¢å…°è¡¨ç¤ºæ³•çš„æ ¸å¿ƒæ€æƒ³ã€‚&lt;/p&gt;
    
    &lt;div class=&quot;note&quot;&gt;
        &lt;p&gt;&lt;strong&gt;RPN ç®€ä»‹&lt;/strong&gt;&lt;/p&gt;
        &lt;p&gt;é€†æ³¢å…°è¡¨ç¤ºæ³•ï¼ˆReverse Polish Notationï¼‰æ˜¯ä¸€ç§ä¸éœ€è¦æ‹¬å·çš„æ•°å­¦è¡¨è¾¾å¼è¡¨ç¤ºæ³•ï¼Œæ‰€æœ‰è¿ç®—ç¬¦éƒ½è·Ÿåœ¨æ“ä½œæ•°åé¢ã€‚&lt;/p&gt;
        &lt;p&gt;ç¤ºä¾‹ï¼š&lt;code&gt;3 4 +&lt;/code&gt; è¡¨ç¤º &lt;code&gt;3 + 4&lt;/code&gt;ï¼Œ&lt;code&gt;3 4 + 5 *&lt;/code&gt; è¡¨ç¤º &lt;code&gt;(3 + 4) * 5&lt;/code&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;
&quot;&quot;&quot;</span>

<span class="hljs-comment"># æ·»åŠ ä»£ç å—</span>
nbText: <span class="hljs-string">&quot;&quot;&quot;&lt;div class=&quot;filename&quot;&gt;rpn_min.cpp&lt;/div&gt;&quot;&quot;&quot;</span>
nbCode:
  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&quot;&quot;#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include &lt;stack&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

double rpn_evaluate(const std::string&amp; expression) {
    std::stack&lt;double&gt; stack;
    std::istringstream iss(expression);
    std::string token;
    
    while (iss &gt;&gt; token) {
        if (token.size() == 1 &amp;&amp; std::string(&quot;+-*/&quot;).find(token[0]) != std::string::npos) {
            if (stack.size() &lt; 2) {
                throw std::runtime_error(&quot;Error: insufficient operands&quot;);
            }
            
            double b = stack.top(); stack.pop();
            double a = stack.top(); stack.pop();
            
            switch (token[0]) {
                case '+': stack.push(a + b); break;
                case '-': stack.push(a - b); break;
                case '*': stack.push(a * b); break;
                case '/': 
                    if (b == 0) throw std::runtime_error(&quot;Error: division by zero&quot;);
                    stack.push(a / b); 
                    break;
            }
        } else {
            try {
                stack.push(std::stod(token));
            } catch (const std::invalid_argument&amp;) {
                throw std::runtime_error(&quot;Error: invalid token '&quot; + token + &quot;'&quot;);
            }
        }
    }
    
    if (stack.size() != 1) {
        throw std::runtime_error(&quot;Error: expression invalid&quot;);
    }
    
    return stack.top();
}

int main() {
    std::string expression;
    std::cout &lt;&lt; &quot;Enter RPN expression: &quot;;
    std::getline(std::cin, expression);
    
    try {
        double result = rpn_evaluate(expression);
        std::cout &lt;&lt; &quot;Result: &quot; &lt;&lt; result &lt;&lt; std::endl;
    } catch (const std::exception&amp; e) {
        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;
        return 1;
    }
    
    return 0;
}&quot;&quot;&quot;</span>

<span class="hljs-comment"># ç¼–è¯‘å‘½ä»¤</span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
&lt;div class=&quot;console&quot;&gt;g++ -std=c++17 -o rpn_min rpn_min.cpp &amp;&amp; ./rpn_min&lt;/div&gt;

&lt;div class=&quot;note&quot;&gt;
    &lt;p&gt;&lt;strong&gt;æœ¬ç« è¦ç‚¹&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
        &lt;li&gt;ç†è§£ RPN çš„åŸºæœ¬åŸç†&lt;/li&gt;
        &lt;li&gt;ä½¿ç”¨ &lt;code&gt;std::stack&lt;/code&gt; å®ç°è®¡ç®—&lt;/li&gt;
        &lt;li&gt;åŸºæœ¬çš„é”™è¯¯å¤„ç†æœºåˆ¶&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
&quot;&quot;&quot;</span>

<span class="hljs-comment"># ç¬¬2ç« </span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
&lt;div class=&quot;chapter&quot; id=&quot;chapter2&quot;&gt;
    &lt;h2&gt;ç¬¬ 2 ç« : å¤´æ–‡ä»¶åŒ– + å•å…ƒæµ‹è¯•&lt;/h2&gt;
    
    &lt;p&gt;å°†æ ¸å¿ƒé€»è¾‘å°è£…æˆå¤´æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å•å…ƒæµ‹è¯•ç¡®ä¿æ­£ç¡®æ€§ã€‚&lt;/p&gt;
&lt;/div&gt;
&quot;&quot;&quot;</span>

nbText: <span class="hljs-string">&quot;&quot;&quot;&lt;div class=&quot;filename&quot;&gt;rpn_engine.hpp&lt;/div&gt;&quot;&quot;&quot;</span>
nbCode:
  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&quot;&quot;#pragma once

#include &lt;stack&gt;
#include &lt;sstream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

class RPNEngine {
public:
    static double evaluate(const std::string&amp; expression) {
        std::stack&lt;double&gt; stack;
        std::istringstream iss(expression);
        std::string token;
        
        while (iss &gt;&gt; token) {
            if (is_operator(token)) {
                if (stack.size() &lt; 2) {
                    throw std::runtime_error(&quot;Insufficient operands&quot;);
                }
                
                double b = stack.top(); stack.pop();
                double a = stack.top(); stack.pop();
                apply_operator(stack, token, a, b);
            } 
            else if (is_function(token)) {
                if (stack.empty()) {
                    throw std::runtime_error(&quot;No operand for function&quot;);
                }
                
                double a = stack.top(); stack.pop();
                apply_function(stack, token, a);
            }
            else {
                try {
                    stack.push(std::stod(token));
                } catch (const std::invalid_argument&amp;) {
                    throw std::runtime_error(&quot;Invalid token: &quot; + token);
                }
            }
        }
        
        if (stack.size() != 1) {
            throw std::runtime_error(&quot;Invalid expression&quot;);
        }
        
        return stack.top();
    }

private:
    static bool is_operator(const std::string&amp; token) {
        if (token.size() != 1) return false;
        char op = token[0];
        return op == '+' || op == '-' || op == '*' || op == '/' || op == '^';
    }
    
    static bool is_function(const std::string&amp; token) {
        return token == &quot;sqrt&quot; || token == &quot;sin&quot; || token == &quot;cos&quot; || token == &quot;log&quot;;
    }
    
    static void apply_operator(std::stack&lt;double&gt;&amp; stack, const std::string&amp; op, 
                              double a, double b) {
        switch (op[0]) {
            case '+': stack.push(a + b); break;
            case '-': stack.push(a - b); break;
            case '*': stack.push(a * b); break;
            case '/': 
                if (b == 0) throw std::runtime_error(&quot;Division by zero&quot;);
                stack.push(a / b); 
                break;
            case '^': stack.push(std::pow(a, b)); break;
        }
    }
    
    static void apply_function(std::stack&lt;double&gt;&amp; stack, const std::string&amp; func, 
                              double a) {
        if (func == &quot;sqrt&quot;) {
            if (a &lt; 0) throw std::runtime_error(&quot;Square root of negative number&quot;);
            stack.push(std::sqrt(a));
        } else if (func == &quot;sin&quot;) {
            stack.push(std::sin(a));
        } else if (func == &quot;cos&quot;) {
            stack.push(std::cos(a));
        } else if (func == &quot;log&quot;) {
            if (a &lt;= 0) throw std::runtime_error(&quot;Logarithm of non-positive number&quot;);
            stack.push(std::log(a));
        }
    }
};&quot;&quot;&quot;</span>

<span class="hljs-comment"># ç¬¬3ç« </span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
&lt;div class=&quot;chapter&quot; id=&quot;chapter3&quot;&gt;
    &lt;h2&gt;ç¬¬ 3 ç« : äº¤äº’å¼ REPL&lt;/h2&gt;
    
    &lt;p&gt;å®ç°ä¸€ä¸ªå®Œæ•´çš„äº¤äº’å¼è®¡ç®—å™¨ï¼Œæ”¯æŒå†å²è®°å½•å’Œå‘½ä»¤è¡¥å…¨ã€‚&lt;/p&gt;
&lt;/div&gt;
&quot;&quot;&quot;</span>

nbText: <span class="hljs-string">&quot;&quot;&quot;&lt;div class=&quot;filename&quot;&gt;repl.cpp&lt;/div&gt;&quot;&quot;&quot;</span>
nbCode:
  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&quot;&quot;#include &quot;rpn_engine.hpp&quot;
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;vector&gt;
#include &lt;string&gt;

class REPL {
private:
    std::vector&lt;std::string&gt; history;
    
    void print_help() {
        std::cout &lt;&lt; &quot;\n=== RPN Calculator Commands ===\n&quot;;
        std::cout &lt;&lt; &quot;  &lt;expression&gt;    Evaluate RPN expression\n&quot;;
        std::cout &lt;&lt; &quot;  help            Show this help message\n&quot;;
        std::cout &lt;&lt; &quot;  history         Show calculation history\n&quot;;
        std::cout &lt;&lt; &quot;  clear           Clear the screen\n&quot;;
        std::cout &lt;&lt; &quot;  quit / exit     Exit the program\n&quot;;
        std::cout &lt;&lt; &quot;\nOperators: + - * / ^\n&quot;;
        std::cout &lt;&lt; &quot;Functions: sqrt sin cos log\n&quot;;
        std::cout &lt;&lt; &quot;Example: '5 5 + 3 *' =&gt; 30\n&quot;;
        std::cout &lt;&lt; &quot;==============================\n&quot;;
    }
    
    void print_history() {
        if (history.empty()) {
            std::cout &lt;&lt; &quot;No history yet.\n&quot;;
            return;
        }
        
        std::cout &lt;&lt; &quot;\n=== Calculation History ===\n&quot;;
        for (size_t i = 0; i &lt; history.size(); ++i) {
            std::cout &lt;&lt; i + 1 &lt;&lt; &quot;. &quot; &lt;&lt; history[i] &lt;&lt; &quot;\n&quot;;
        }
        std::cout &lt;&lt; &quot;===========================\n&quot;;
    }

public:
    void run() {
        std::cout &lt;&lt; &quot;RPN Calculator REPL (Type 'help' for commands)\n&quot;;
        std::cout &lt;&lt; &quot;==============================================\n\n&quot;;
        
        std::string line;
        while (true) {
            std::cout &lt;&lt; &quot;rpn&gt; &quot;;
            if (!std::getline(std::cin, line)) break;
            
            line.erase(0, line.find_first_not_of(&quot; \t\n\r&quot;));
            line.erase(line.find_last_not_of(&quot; \t\n\r&quot;) + 1);
            
            if (line.empty()) continue;
            
            if (line == &quot;quit&quot; || line == &quot;exit&quot;) {
                std::cout &lt;&lt; &quot;Goodbye!\n&quot;;
                break;
            } else if (line == &quot;help&quot;) {
                print_help();
                continue;
            } else if (line == &quot;history&quot;) {
                print_history();
                continue;
            } else if (line == &quot;clear&quot;) {
                for (int i = 0; i &lt; 50; ++i) std::cout &lt;&lt; &quot;\n&quot;;
                continue;
            }
            
            try {
                double result = RPNEngine::evaluate(line);
                std::cout &lt;&lt; &quot;= &quot; &lt;&lt; std::setprecision(12) &lt;&lt; result &lt;&lt; &quot;\n&quot;;
                history.push_back(line + &quot; =&gt; &quot; + std::to_string(result));
            } catch (const std::exception&amp; e) {
                std::cout &lt;&lt; &quot;Error: &quot; &lt;&lt; e.what() &lt;&lt; &quot;\n&quot;;
            }
        }
    }
};

int main() {
    REPL repl;
    repl.run();
    return 0;
}&quot;&quot;&quot;</span>

<span class="hljs-comment"># ç¬¬4ç« </span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
&lt;div class=&quot;chapter&quot; id=&quot;chapter4&quot;&gt;
    &lt;h2&gt;ç¬¬ 4 ç« : å•æ–‡ä»¶å‘å¸ƒ &amp; äº¤å‰ç¼–è¯‘&lt;/h2&gt;
    
    &lt;p&gt;å°†æ•´ä¸ªé¡¹ç›®æ‰“åŒ…æˆå•ä¸ªæ–‡ä»¶ï¼Œå¹¶æ”¯æŒè·¨å¹³å°ç¼–è¯‘ã€‚&lt;/p&gt;
&quot;&quot;&quot;</span>

<span class="hljs-comment"># æ·»åŠ è¡¨æ ¼</span>
nbRawHtml: <span class="hljs-string">&quot;&quot;&quot;
&lt;table&gt;
    &lt;tr&gt;
        &lt;th&gt;å¹³å°&lt;/th&gt;
        &lt;th&gt;ç¼–è¯‘å‘½ä»¤&lt;/th&gt;
        &lt;th&gt;æ–‡ä»¶å¤§å°&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;Linux/macOS&lt;/td&gt;
        &lt;td&gt;&lt;code&gt;g++ -std=c++17 -O3 -o rpn rpn_single.cpp&lt;/code&gt;&lt;/td&gt;
        &lt;td&gt;~92 KB&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;Windows (MinGW)&lt;/td&gt;
        &lt;td&gt;&lt;code&gt;x86_64-w64-mingw32-g++ -std=c++17 -O3 -o rpn.exe rpn_single.cpp&lt;/code&gt;&lt;/td&gt;
        &lt;td&gt;~85 KB&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
&quot;&quot;&quot;</span>

nbText: <span class="hljs-string">&quot;&quot;&quot;
&lt;div class=&quot;console&quot;&gt;# ä¸‹è½½å®Œæ•´é¡¹ç›®
git clone https://github.com/sonya-lzy/rpn_calc.git
cd rpn_calc

# ç¼–è¯‘å¹¶è¿è¡Œ
g++ -std=c++17 -o rpn src/rpn_calc.cpp
./rpn&lt;/div&gt;
&quot;&quot;&quot;</span>

<span class="hljs-comment"># ç¬¬5ç« </span>
nbText: <span class="hljs-string">&quot;&quot;&quot;
&lt;div class=&quot;chapter&quot; id=&quot;chapter5&quot;&gt;
    &lt;h2&gt;ç¬¬ 5 ç« : æ‰©å±•åŠŸèƒ½ä¸æŒ‘æˆ˜&lt;/h2&gt;
    
    &lt;div class=&quot;note&quot;&gt;
        &lt;p&gt;&lt;strong&gt;æ‰©å±•æŒ‘æˆ˜&lt;/strong&gt;&lt;/p&gt;
        &lt;ol&gt;
            &lt;li&gt;&lt;strong&gt;å¤æ•°æ”¯æŒ&lt;/strong&gt;ï¼šæ‰©å±•æ”¯æŒå¤æ•°è¿ç®—&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;å˜é‡å­˜å‚¨&lt;/strong&gt;ï¼šå®ç°å˜é‡èµ‹å€¼å’Œä½¿ç”¨&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;è„šæœ¬æ¨¡å¼&lt;/strong&gt;ï¼šæ”¯æŒä»æ–‡ä»¶è¯»å–è¡¨è¾¾å¼&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;å›¾å½¢ç•Œé¢&lt;/strong&gt;ï¼šä½¿ç”¨ Qt æˆ– ImGUI æ·»åŠ  GUI&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;ç½‘ç»œè®¡ç®—&lt;/strong&gt;ï¼šå®ç°å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼&lt;/li&gt;
        &lt;/ol&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
        &lt;strong&gt;GitHub ä»“åº“:&lt;/strong&gt; &lt;a href=&quot;https://github.com/sonya-lzy/rpn_calc&quot;&gt;https://github.com/sonya-lzy/rpn_calc&lt;/a&gt;&lt;br&gt;
        &lt;strong&gt;åœ¨çº¿æ–‡æ¡£:&lt;/strong&gt; &lt;a href=&quot;https://sonya-lzy.github.io/rpn_calc/rpn_manual.html&quot;&gt;https://sonya-lzy.github.io/rpn_calc/rpn_manual.html&lt;/a&gt;
    &lt;/p&gt;
&lt;/div&gt;
&quot;&quot;&quot;</span>

<span class="hljs-comment"># é¡µè„š</span>
nbText: <span class="hljs-string">fmt&quot;&quot;&quot;
&lt;hr&gt;
&lt;p style=&quot;text-align: center; color: #666; font-size: 0.9em;&quot;&gt;
    Â© 2024 RPN Calculator Project | C++ ç¼–ç¨‹ä½œä¸š&lt;br&gt;
    ç”Ÿæˆæ—¶é—´: {getTime().format(&quot;yyyy-MM-dd HH:mm:ss&quot;)}
&lt;/p&gt;
&quot;&quot;&quot;</span>

nbSave
</code></pre>
</section><script>
function toggleSourceDisplay() {
  var btn = document.getElementById("show")
  var source = document.getElementById("source");
  if (btn.innerHTML=="Show Source") {
    btn.innerHTML = "Hide Source";
    source.style.display = "block";
  } else {
    btn.innerHTML = "Show Source";
    source.style.display = "none";
  }
}
</script></body>
</html>